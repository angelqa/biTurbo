<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<title>biTurbo sample banner</title>
<script src="../lib/biTurbo.js" type="text/javascript"></script>
</head>


<body> 

<div id="a_banner_elements" ></div>


<script type="text/javascript">
	function ext_clickTag(){
		window.open("https://github.com/angelqa/biTurbo");
	}
	function pajaroSSEnded(){
		//alert("el Pájaro ya ha volado todo lo que tenía que volar")
		a.playSpriteSheet(pajaro,0,15,21,1); // object setup, delay, init frame, frames to play, direction
	}
</script>
<script type="text/javascript">
	
	var a = biTurbo.create() ;
	a.width = 300;
	a.height = 600;
	a.debug = true
	a.loop = 1;
	a.insertionPoint = 'a_banner_elements';

	// 1 add html elements

	a.initStyle();
	a.startWhenLoadedEnough();
	
	//  CREATE HTML ELEMENTS

	//a.createDivElement("id_name","CSS styles") creates html dom elements with some initial styling
	//a.acc_CSS(alpha,x,y,w,h) is a helper function to quickly write commonly used css styles

	//Frame 1 Elements
	var pajaro={
		htmlElement : "div_pajaro",
		source : "img/loro_21f_512.png",
		currentFrame : 1,
		totalFrames : 21,
		framesToPlay : 5*21 ,
		frameDuration : 1000/20 ,
		width : 362/4 ,
		height : 373/4 ,
		col : 5 ,
		rows : 5 ,
		positionX : 0 ,
		positionY : 0 ,
		verbose : true
	};
	

	a.createDivElement("f1_bkg","img/bkg1.jpg");
	a.createDivElement("f1_flyBack","img/flying_letters.png",a.CSS({a:0.5 , t:50 , w:4016}));
	a.createDivElement("f1_flyFront","img/flying_letters.png",a.CSS({a:0.7 , t:20 , w:4016}));
	a.createDivElement("f1_html5","img/html5.png",a.CSS({l:50 , t:125}));
	a.createDivElement("f1_banner","img/banner.png",a.CSS({l:25 , t:200}));
	a.createDivElement("f1_ads","img/ads.png",a.CSS({l:180 , t:220}));
	a.createDivElement("f1_copy1","img/copy1.png",a.CSS({l:22 , t:354}));
	a.createDivElement("f1_copy2","img/copy2.png",a.CSS({l:56 , t:354}));
	a.createSpriteSheet(pajaro);
	//Frame 2 Elements
	a.createDivElement("f2_bkg","img/bkg2.jpg");
	a.createDivElement("f2_content","img/copyF2.png",a.CSS({a:0.9}));
	a.createDivElement("noise","img/scanline_refresh.png",a.CSS({a:0.15 , t:-50}));
	a.createDivElement("f2_scanline","img/scanline10.png",a.CSS({a:0.2 , w:300 , h:600}));
	a.createDivElement("f2_border","img/f2_border.png");

	a.addImagesToPreloadQueue = false; //stop the preload queue at the first frame assets
	//Frame 3 Elements
	a.createDivElement("f3_bkg","img/bkg3.png");
	a.createDivElement("f3_CTA","img/cta.png",a.CSS({a:1 , l:55 , t:250}));
	//a.createDivElement("f3_CTA","img/cta.png",a.CSS({a:1 , l:55 , t:250})+ " z-index : 5; "); // intesresting for :hover
	a.createDivElement("f3_codeinTop","img/codein.png",a.CSS({w:4016}));
	a.createDivElement("f3_codeinBot","img/codein.png",a.CSS({t:566 , w:4016}));
	a.createTextElement("text1", "(^.^)", "color: #fff; font-size: 23px;"); // primitive support for adding text with custom css. Text elements are created nested inside an automatically created div called with the same name+"_container"
	a.createDivElement("f3_scanline","img/scanline10.png",a.CSS({a:0.25 , w:300 ,h:600}));
	a.createDivElement("black_bkg","",("opacity:1 ; left:0px ; top:0px ; background-color:black ; width:" + a.width + "px ; height:" + a.height + "px ; " ),true);

	//a.setBTN("clickable element name","click user Function name", bool:stopsTheCreative? , "the name of the last frame of the animation to goto on click")
	a.setBTN("a_banner_elements","ext_clickTag" , true , "f_clickedFrame"); // clickable button
	//a.setBTN("a_banner_elements","ext_clickTag" ); // clickable button
	//a.createBorder("color",width)
	a.createBorder("#4ff",2); // creative external frame border

	




	// DEFINE CLASSES for all the banner elements (keyframes)

	a.createClass("transparent",a.CSS({a:0}));
	a.createClass("opaque",a.CSS({a:1}));
	a.createClass("invisible","display:none ;");
	a.createClass("visible","display:block ; ");

	a.createClass("a_banner_elements_mask",("overflow: hidden; width: "+ a.width +"px; height: "+ a.height + "px;display: block; position: absolute; margin: 0px;left: 0px; top: 0px;"));
	a.createClass("f1_pajaro_initial" , a.CSS({s:1 , y:0 , x:-200}));
	a.createClass("f1_pajaro_final" , a.CSS({s:5 , y:100 , x:250}));
	
	a.createClass("f1_html5_initial" , a.CSS({a:0 , s:0.02 , y:130}));
	a.createClass("f1_html5_final" , a.CSS({a:1 , s:1 , y:0}));
	a.createClass("f1_banner_initial" , a.CSS({a:0 ,s:0.02 ,y:90}));
	a.createClass("f1_banner_final" , a.CSS({a:1 , s:1 , y:0}));
	a.createClass("f1_ads_initial" , a.CSS({a:0 , r:120 , s:9 , x:-400 , y:130}));
	a.createClass("f1_ads_final" , a.CSS({a:1 , r:0 , s:1 , x:0 ,y:0}));
	a.createClass("f1_flyFront_initial" , a.CSS({ x:-2500 }));
	a.createClass("f1_flyFront_final" , a.CSS({ x:0 }));
	a.createClass("f1_flyBack_initial" , a.CSS({s:0.7 , x:-2500}));
	a.createClass("f1_flyBack_final" ,  a.CSS({s:0.7 , x:-1000}));
	a.createClass("f1_copy_in" , a.CSS({a:0 , x:50}));
	a.createClass("f1_copy_stay" , a.CSS({a:1 , x:0}));
	a.createClass("f1_copy_out" , a.CSS({a:0 , x:-50}));

	a.createClass("f2_content_initial" , a.CSS({a:0.8 , h:1 }));
	a.createClass("f2_content_final" , a.CSS({a:1 , h:600}));
	a.createClass("f2_noise_initial" , a.CSS({y:0}));
	a.createClass("f2_noise_final" , a.CSS({y:650}));

	a.createClass("f3_text1_container_out" , a.CSS({a:0.5 , l:-128 , t:200}));
	a.createClass("f3_text1_container_in" , a.CSS({a:1 , l:128 , t:200}));
	a.createClass("f3_CTA_initial" , a.CSS({r:180 , s:0.005}));
	a.createClass("f3_CTA_final" , a.CSS({a:1 , r:0 , s:1}));
	//a.createClass("f3_CTA:hover" , a.CSS({s:1.5})) ; // care about z-index
	a.createClass("f3_code_initial" , a.CSS({x:0}));
	a.createClass("f3_code_final" , a.CSS({x:-1969}));
	a.createClass("f3_bkg_initial" , a.CSS({s:2.5 , y:-250}));
	a.createClass("f3_bkg_final" , a.CSS({s:1, y:0}));


	// DEFINE TWEENS

	//a.createTween("name",duration,easing)
	// easing : 0 lin / 1 easeIn / 2 easeOut / 3 easeInOut / 4 bounce / 5 stepEnd


	a.createTween("verySlow",15,0);
	a.createTween("slow",5,0);
	a.createTween("instant",0.1,5);
	a.createTween("quick_in",0.5,1);
	a.createTween("quick_out",0.5,2);
	a.createTween("normal",1,3);
	a.createTween("boing",1,4);
	a.createTween("slowBoing",2,4);



	//	SETUP the initial classes for all elements
	a.applyClass("a_banner_elements", "a_banner_elements_mask"); // hides elements outside the banner size
	a.applyClassToAll("invisible");
	a.applyClass("black_bkg","opaque");


	//define a function for each frame in timeline
	function f_initFrame(){	//define init frame
		//a.tweenClass("id","nameOfclass", delay , "nameOftween")
		a.applyClassToAll("invisible");
		a.applyClass("black_bkg","opaque");

		a.tweenClass("f1_bkg","opaque", 0 ,"instant");
		a.tweenClass("f1_flyBack","f1_flyBack_initial", 0 , "instant");
		a.tweenClass("f1_flyFront","f1_flyFront_initial", 0 , "instant");
		a.nextFrameInTimeLine(0.1);
	}
	
	function f_loopIn(){
		//a.clearClass("p1");
		a.tweenClass("f1_bkg","opaque", 0 ,"instant");
		a.nextFrameInTimeLine(0.1); // fix for explorer
	}

	function f_firstFrame(){
		a.clearClass("div_pajaro");
		a.playSpriteSheet(pajaro,1,1,4*15,-1,"pajaroSSEnded"); // object setup, delay, init frame, frames to play, direction

		a.tweenClass("black_bkg","transparent", 0.3 ,"normal");
		
		a.tweenClass("div_pajaro","f1_pajaro_initial", 0.1 ,"instant");
		a.tweenClass("div_pajaro","f1_pajaro_final", 1 ,"slow");

		a.tweenClass("f1_flyBack","f1_flyBack_initial", 0 ,"instant");
		a.tweenClass("f1_flyBack","f1_flyBack_final", 0.1 , "verySlow");

		a.tweenClass("f1_flyFront","f1_flyFront_initial",0 ,"instant");
		a.tweenClass("f1_flyFront","f1_flyFront_final", 0.1 ,"verySlow");

		a.tweenClass("f1_html5","f1_html5_initial",2,"instant");
		a.tweenClass("f1_html5","f1_html5_final",2.2,"boing");

		a.tweenClass("f1_banner","f1_banner_initial",3,"instant");
		a.tweenClass("f1_banner","f1_banner_final",3.2,"boing");

		a.tweenClass("f1_ads","f1_ads_initial",4,"instant");
		a.tweenClass("f1_ads","f1_ads_final",4.2,"boing");

		a.animateClass("f1_copy1",[ ["f1_copy_in" , 5 ] , ["f1_copy_stay" , 5 , "quick_out"] , ["f1_copy_out" , 7.5 , "quick_in"] ]);
		a.animateClass("f1_copy2",[ ["f1_copy_in" , 8 ] , ["f1_copy_stay" , 8 , "quick_out"] , ["f1_copy_out" , 10.5 , "quick_in"] ]);
		//a.animateClass("f1_copy2",["f1_copy_in"])

		a.tweenClass("black_bkg","opaque",11,"normal");
		a.nextFrameInTimeLine(12);
	}	
	
	function f_secondFrame(){

		a.tweenClass("f2_bkg","opaque",0,"instant");
		/*
		a.clearClass("f2_scanline");
		a.clearClass("noise");
		a.clearClass("f2_border");
		*/
		a.multipleClearClass(["f2_scanline" , "noise" , "f2_border"]);

		a.tweenClass("black_bkg","transparent",0.2,"normal");
		//a.tweenClass("noise","f2_noise_initial",0.1,"instant");
		a.tweenClass("f2_content","f2_content_initial",0.4,"instant");
		a.tweenClass("f2_content","f2_content_final",0.6,"verySlow");
		
		// 4 ways of making a repeated animation for an element
		
		/* 
		// #1  Each keyframe in it's exact time
		a.tweenClass("noise","f2_noise_initial",0,"instant");
		a.tweenClass("noise","f2_noise_final",0.1,"slow");
		a.tweenClass("noise","f2_noise_initial",5.2,"instant");
		a.tweenClass("noise","f2_noise_final",5.5,"slow");
		a.tweenClass("noise","f2_noise_initial",10.2,"instant");
		a.tweenClass("noise","f2_noise_final",10.5,"slow");
		a.tweenClass("noise","f2_noise_initial",15.2,"instant");
		a.tweenClass("noise","f2_noise_final",15.5,"slow");
		*/

		// #2   One animation keyframe Array with each time
		//a.animateClass("noise",[ ["f2_noise_final" , 0.1 , "slow" ] , ["f2_noise_initial" , 5.2 ] ,  ["f2_noise_final" , 5.5 , "slow" ] , ["f2_noise_initial" , 10.2 ] , ["f2_noise_final" , 10.5 , "slow" ] , ["f2_noise_initial" , 15.2] , ["f2_noise_final" , 15.5 , "slow" ] ]);
		



		/* 
		// #3   One animation keyframeArray per each pair ok keyframe
		a.animateClass("noise",[ ["f2_noise_initial" , 0.1 ] ,  ["f2_noise_final" , null , "slow" ] ]);
		a.animateClass("noise",[ ["f2_noise_initial" , 5.2 ] ,  ["f2_noise_final" , null , "slow" ] ]);
		a.animateClass("noise",[ ["f2_noise_initial" , 10.2 ] , ["f2_noise_final" , 10.2 , "slow" ] ]);
		a.animateClass("noise",[ ["f2_noise_initial" , 15.2] , ["f2_noise_final" , 15.2 , "slow" ] ]);
		*/
		

		// #4   Create needed animations with dynamic values
		var i=0
		var b=0
		for(i = 0 ; i < 4 ; i++){
			b=(i*5)+0.1
			a.animateClass("noise",[ ["f2_noise_initial" , b , "instant"] ,  ["f2_noise_final" , b , "slow" ] ]);
		}
		


		a.tweenClass("black_bkg","opaque",18.5,"normal");
		a.nextFrameInTimeLine(19.5);
		
	}
	function f_thirdFrame(){
		a.multipleClearClass(["f3_bkg" , "f3_CTA" , "f3_codeinTop" , "f3_codeinBot" , "text1_container" , "text1" , "f3_scanline"]);

		a.tweenClass("f3_bkg","f3_bkg_initial",0.1,"instant");
		a.tweenClass("f3_bkg","f3_bkg_final",0.5,"verySlow");

		a.tweenClass("black_bkg","transparent",0.6,"normal");

		a.tweenClass("f3_CTA","f3_CTA_initial",0.3,"instant");
		a.tweenClass("f3_CTA","f3_CTA_final",1.5,"slowBoing");

		a.tweenClass("f3_codeinTop","f3_code_initial",0.1,"instant");
		a.tweenClass("f3_codeinTop","f3_code_final",0.2,"verySlow");

		a.tweenClass("f3_codeinBot","f3_code_initial",0.1,"instant");
		a.tweenClass("f3_codeinBot","f3_code_final",0.2,"verySlow");

		a.tweenClass("text1_container","f3_text1_container_out",0.1,"instant");
		a.tweenClass("text1_container","f3_text1_container_in",2.75,"slowBoing");

		if(a.loop>0){
			a.loop--;
			a.nextFrameInTimeLine(14);
		}
	}

	function f_loopOut(){
		a.tweenClass("black_bkg","opaque",0.1,"normal");
		a.currentFrameIndex=-1; // index of "f_loop_in"
		a.nextFrameInTimeLine(1);
	}

	//define timeline
	a.setTimeLine("f_initFrame","f_loopIn","f_firstFrame", "f_secondFrame" , "f_thirdFrame","f_loopOut");


	function f_clickedFrame(){ //this frame is displayed to stop the banner when user clicks on cta
		console.log("f_clickedFrame")
		a.applyClassToAll("invisible");
		a.multipleClearClass(["f3_bkg" , "f3_CTA" , "f3_codeinTop" , "f3_codeinBot" , "text1_container" , "text1" , "f3_scanline"]);
		a.applyClass("f3_codeinTop","f3_code_final");
		a.applyClass("f3_codeinBot","f3_code_final");
		a.applyClass("f3_bkg","f3_bkg_final");
		a.applyClass("black_bkg","invisible");
		a.applyClass("f3_CTA","f3_CTA_final");
		a.applyClass("text1_container","f3_text1_container_in");
	}

	

</script>
</body>
</html>